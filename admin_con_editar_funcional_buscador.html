
<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Admin - Autos Maravilla</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap" rel="stylesheet"/>
<style>
    body { font-family: 'Roboto', sans-serif; background: #121212; color: #fff; padding: 2rem; }
    header { display: flex; align-items: center; margin-bottom: 2rem; }
    header img { height: 50px; margin-right: 1rem; }
    h1 { color: #FFD700; margin: 0; }
    form { max-width: 500px; background: #1e1e1e; padding: 2rem; border-radius: 10px; box-shadow: 0 0 10px #000; }
    input, textarea, button {
      width: 100%; margin-top: 0.8rem; padding: 0.6rem; border: none;
      border-radius: 5px; font-size: 1rem;
    }
    input, textarea { background: #333; color: white; }
    button { background: #FFD700; color: #000; font-weight: bold; cursor: pointer; }
  </style>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>
<header>
<img alt="Logo" src="https://i.postimg.cc/8zXCkRFm/Imagen-de-Whats-App-2025-04-29-a-las-12-02-33-41dfd301.jpg"/>
<h1>Panel Administrador</h1>
</header>
<form id="car-form">
<input id="title" placeholder="Título" required="" type="text"/>
<input id="price" placeholder="Precio" required="" type="text"/>
<input id="model" placeholder="Modelo" required="" type="text"/>
<input id="brand" placeholder="Marca" required="" type="text"/>
<input id="transmission" placeholder="Transmisión" required="" type="text"/>
<input id="fuel" placeholder="Combustible" required="" type="text"/>
<textarea id="description" placeholder="Descripción" required=""></textarea>
<div id="image-inputs" style="margin-top:1rem;">
<input class="image-url" placeholder="URL de imagen 1" required="" type="text"/>
</div>
<button onclick="addImageField()" style="margin-top:0.8rem;background:#555;color:#fff;border:none;padding:0.5rem;border-radius:5px;cursor:pointer;" type="button">Agregar otra imagen</button>
<input id="img1" placeholder="URL de imagen principal" required="" type="text"/>
<input id="img2" placeholder="URL de imagen secundaria" type="text"/>
<button type="submit">Guardar vehículo</button>
</form>
<input id="buscador" placeholder="Buscar por título..." style="width:100%;padding:0.5rem;margin-bottom:1rem;border-radius:6px;border:none;background:#333;color:white;" type="text"/><h2 style="margin-top: 2rem; color: #FFD700;">Vehículos publicados</h2>
<div id="car-list"></div>
<script>
    const firebaseConfig = {
      apiKey: "AIzaSyBcoM5H6GLk7Gqb-Dd-t6frp-AKjgeQZCQ",
      authDomain: "autos-maravilla-fb60f.firebaseapp.com",
      projectId: "autos-maravilla-fb60f",
      storageBucket: "autos-maravilla-fb60f.appspot.com",
      messagingSenderId: "848697544786",
      appId: "1:848697544786:web:9ff4ac2374f43b886cf8b"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById("car-form").addEventListener("submit", async (e) => {
      e.preventDefault();
      const car = {
        title: title.value,
        price: price.value,
        model: model.value,
        brand: brand.value,
        transmission: transmission.value,
        fuel: fuel.value,
        description: description.value,
        images: Array.from(document.querySelectorAll('.image-url')).map(input => input.value).filter(Boolean)
      };
      if (editId) {
        await db.collection("vehiculos").doc(editId).update(car);
        alert("Vehículo actualizado con éxito");
        editId = null;
      } else {
        await db.collection("vehiculos").add(car);
        alert("Vehículo guardado con éxito");
      }
      alert("Vehículo guardado con éxito");
      e.target.reset();
    });
  </script>
<script>
    function addImageField() {
      const container = document.getElementById("image-inputs");
      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = "URL de imagen";
      input.className = "image-url";
      input.style = "margin-top: 0.5rem; background: #333; color: white; padding: 0.6rem; border-radius: 5px; border: none; width: 100%;";
      container.appendChild(input);
    }
  </script>
<script>
    function addImageField() {
      const container = document.getElementById("image-inputs");
      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = "URL de imagen";
      input.className = "image-url";
      input.style = "margin-top: 0.5rem; background: #333; color: white; padding: 0.6rem; border-radius: 5px; border: none; width: 100%;";
      container.appendChild(input);
    }

    function renderCars() {
      db.collection("vehiculos").onSnapshot(snapshot => {
        const container = document.getElementById("car-list");
        container.innerHTML = "";
        snapshot.forEach(doc => {
          const car = doc.data();
          const div = document.createElement("div");
          div.style = "background:#1e1e1e;padding:1rem;margin-top:1rem;border-radius:8px;";
          div.innerHTML = `
            <h3 style="color:#FFD700">${car.title}</h3>
            <p><strong>Precio:</strong> ${car.price}</p>
            <p><strong>Modelo:</strong> ${car.model}</p>
            <p><strong>Marca:</strong> ${car.brand}</p>
            <p><strong>Transmisión:</strong> ${car.transmission}</p>
            <p><strong>Combustible:</strong> ${car.fuel}</p>
            <p>${car.description}</p>
            ${car.images.map(img => `<img src="${img}" style="width:100%;max-height:200px;object-fit:cover;border-radius:6px;margin-top:0.5rem;" />`).join("")}
            <button onclick="editCar('${doc.id}')" style="margin-top:0.8rem;background:#FFA500;color:white;border:none;padding:0.5rem;border-radius:5px;cursor:pointer;">Editar</button>
            <button onclick="deleteCar('${doc.id}')" style="margin-top:0.8rem;background:#cc0000;color:white;border:none;padding:0.5rem;border-radius:5px;cursor:pointer;">Eliminar</button>
          `;
          container.appendChild(div);
        });
      });
    }

    function deleteCar(id) {
      if (confirm("¿Eliminar este vehículo?")) {
        db.collection("vehiculos").doc(id).delete();
      }
    }

    renderCars();
  
let editId = null;

function editCar(id) {
  db.collection("vehiculos").doc(id).get().then(doc => {
    if (doc.exists) {
      const car = doc.data();
      document.getElementById("title").value = car.title;
      document.getElementById("price").value = car.price;
      document.getElementById("model").value = car.model;
      document.getElementById("brand").value = car.brand;
      document.getElementById("transmission").value = car.transmission;
      document.getElementById("fuel").value = car.fuel;
      document.getElementById("description").value = car.description;

      const container = document.getElementById("image-inputs");
      container.innerHTML = "";
      car.images.forEach(url => {
        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "URL de imagen";
        input.className = "image-url";
        input.style = "margin-top: 0.5rem; background: #333; color: white; padding: 0.6rem; border-radius: 5px; border: none; width: 100%;";
        input.value = url;
        container.appendChild(input);
      });

      editId = id;
    }
  });
}



document.getElementById("buscador").addEventListener("input", function () {
  const valor = this.value.toLowerCase();
  document.querySelectorAll("#car-list > div").forEach(div => {
    const titulo = div.querySelector("h3")?.textContent.toLowerCase() || "";
    div.style.display = titulo.includes(valor) ? "block" : "none";
  });
});
</script>
</body>
</html>


